@page "/accounts"
@rendermode InteractiveWebAssembly

<h3>Accounts</h3>

<AccountTableTemplate Accounts="@accounts">
    <HeaderTemplate>
        <tr>
            <th>Number</th>
            <th>Balance</th>
            <th>Status</th>
        </tr>
    </HeaderTemplate>

    <RowTemplate Context="account">
        <tr>
            <td>@account.Number</td>
            <td>@account.Balance</td>
            <td>@account.Status</td>
        </tr>
    </RowTemplate>

</AccountTableTemplate>

<p>@message</p>

@code {


    private IEnumerable<Account> accounts;


    private string message = "Loading Web Assembly...";


    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            message = "Loading accounts...";

            StateHasChanged();



            accounts = new List<Account>
            {
                new Account { Id = 1, Number = "11110000", Balance = 100, Status = AccountStatus.Opened },
                new Account { Id = 2, Number = "22220000", Balance = 100, Status = AccountStatus.Opened },
                new Account { Id = 3, Number = "33330000", Balance = 100, Status = AccountStatus.Closed },
                new Account { Id = 4, Number = "44440000", Balance = 100, Status = AccountStatus.Opened },
                new Account { Id = 5, Number = "66660000", Balance = 100, Status = AccountStatus.Locked },
            };

            message = "Loaded accounts.";

            StateHasChanged();
        }
    }
}


